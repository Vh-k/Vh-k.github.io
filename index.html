<style>
    body, html {
        height: 100%;
    }

    .font{
        animation: color-change 1s infinite;
    }

    @keyframes color-change {
        0% { color: red; }
        25% { color: green; }
        50% { color: blue; }
        50% { color: yellow; }
        100% { color: red; }
    }

    .bg {
        /* The image used */
        background-image: url("woa.png");
        /*background-image: url("pepeyeah.jpg");*/
        /*opacity: 0.75;*/

        /* Full height */
        height: 100%;

        /* Center and scale the image nicely */
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
    }

    .shrekn {
        height: 200px;
        width: 300px;
        display: none;
        background-image: url("shrekn.gif");
        position: absolute;
        left: 0;
        bottom: 0;
    }

    @keyframes float {
        0% {
            transform: translatey(0px);
        }
        50% {
            transform: translatey(-20px);
        }
        100% {
            transform: translatey(0px);
        }
    }

    h1, h2{
        animation: float 6s ease-in-out infinite;
    }


</style>

<!-- Display the countdown timer in an element -->
<html>
<body>
<div class="bg">
    <br>
    <h1>Is het al tijd voor tafeltennis?</h1>
    <h2 id="demo"></h2>
    <div class="shrekn"></div>
</div>

</body>
</html>

<script>
    class TimeSlot {
        #startDate;
        #endDate;
        #startTime = [];
        #endTime = [];
        constructor(startTime = '12:00:00', endTime = '13:00:00'){
            this.#startTime = [parseInt(startTime.split(':')[0]), parseInt(startTime.split(':')[1]), parseInt(startTime.split(':')[2]), 0]
            this.#endTime = [parseInt(endTime.split(':')[0]), parseInt(endTime.split(':')[1]), parseInt(endTime.split(':')[2]), 0]
            this.updateTime()
        }
        updateTime(){
            let startDate = new Date()
            let endDate = new Date()
            let currentDate = new Date()
            startDate.setHours(...this.#startTime)
            endDate.setHours(...this.#endTime)

            if (endDate - currentDate.getTime() < 0){
                startDate.setDate(currentDate.getDate() + 1)
                endDate.setDate(currentDate.getDate() + 1)
            }

            this.#startDate = startDate
            this.#endDate = endDate
        }
        isActive(){
            let current = new Date()
            console.log({
                curr: current.getTime(),
                start: this.#startDate.getTime(),
                end: this.#endDate.getTime(),

            })
            return (current.getTime() >= this.#startDate.getTime() && current.getTime() < this.#endDate.getTime())
        }
        getStart(){
            return this.#startDate
        }
        getEnd(){
            return this.#endDate
        }
        getDifference(){
            // Get today's date and time
            let now = new Date().getTime();

            // Find the distance between now and the count down date
            let distance = this.#startDate - now;

            if (distance < 0){
                this.updateTime()
            }

            // Time calculations for days, hours, minutes and seconds
            return {
                time: distance,
                days: Math.floor(distance / (1000 * 60 * 60 * 24)),
                hours: Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)),
                minutes: Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)),
                seconds: Math.floor((distance % (1000 * 60)) / 1000),
            }
        }
    }

    let timeslots = [
        new TimeSlot('10:00:00', '10:15:00'),
        lunchBreak = new TimeSlot('12:30:00', '13:15:00'),
        doneWithWork = new TimeSlot('17:00:00', '23:59:59')
    ]

    timeslots.forEach(function(value){
        
      // TODO: Check if any timeslot is active
    })



    // TODO: Iterate through TimeSlots, execute timeslot function between times

    // Set the date we're counting down to
    let w = new Date()
    w.setHours(17,0,0,0)
    let countDownDate = w.getTime();

    // Update the count down every 1 second
    let x = setInterval(function() {

        // Get today's date and time
        let now = new Date().getTime();

        // Find the distance between now and the count down date
        let distance = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        let days = Math.floor(distance / (1000 * 60 * 60 * 24));
        let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        let seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // Display the result in the element with id="demo"
        document.getElementById("demo").innerHTML = "Het is over " + hours + " uur "
            + minutes + " minuten en " + seconds + " seconden pas tijd voor tafeltennis ðŸ˜‰";

        // If the count down is finished, write some text
        if (distance < 0) {
            clearInterval(x);
            document.getElementById("demo").innerHTML = "Het is tijd voor tafeltennis!";
            document.querySelector('.shrekn').style.display = 'block'
            document.getElementById("demo").classList.add('font')
        }
    }, 1000);
</script>
